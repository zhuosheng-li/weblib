# 前端性能优化

### 一.内容部分

##### 1.尽可能减少 `HTTP` 请求

* 合并文件是通过把所有的脚本放到一个文件中来减少 HTTP 请求的方法,如可以简单地把所有的 CSS 文件都放入一个样式表中。

* CSS Sprites （雪碧图）是减少图像请求的有效方法

  * 通过CSS的background-image和 background-position属性来显示图片的不同部分

* 使用内联图片

  * 内联图像是使用`data:URL scheme`的方法把图像数据加载页面中。这可能会增加页面的大小。把内联图像放到样式表(可缓存)中可以减少`HTTP`请求同时又避免增加页面文件的大小.

  * 超过1000kb的图片，base64编码会使图片大小增大，导致网页整体下载速度减慢

  * 兼容性较差，只支持ie8以上浏览器

    ​

##### 2.延迟加载

* 非首页必须呈现的延迟加载



##### 3.预加载

* 预加载是在浏览器空闲时请求将来可能会用到的页面内容(如图像、样式表和脚本)。使用这种方法,当用户要访问下一个页面时,页面中的内容大部分已经加载到缓存中了,因此可以大大改善访问速度。

##### 4.减少DOM元素的数量

* 布局上减少没必要的 div 嵌套。

##### 5.少用iframe

ifrmae 元素可以在父文档中插入一个新的 HTML 文档。了解 iframe 的工作理然后才能更加有效地使用它,这一点很重要。

优点:

* 解决加载缓慢的第三方内容如图标和广告等的加载问题
* Security sandbox
* 并行加载脚本

缺点：

* 即使内容为空，加载也需要时间
* 会阻止页面加载
* 没有语义



### 二、JavaScript 和 CSS

- CSS:

  把样式表置于顶部

  避免使用CSS表达式(Expression)

  使用外部JavaScript和CSS

  削减JavaScript和CSS

  用<link>代替@import

  避免使用滤镜


- JavaScript

  把脚本置于页面底部

  使用外部JavaScript和CSS

  削减JavaScript和CSS

  剔除重复脚本

  减少DOM访问

  开发智能事件处理程序


#### css

##### 1.把样式表置于顶部

**把CSS文件放在中，避免使用@import**（因为使用了import之后就相当于把另外的CSS放在了标签的底部）



##### 2.避免使用CSS表达式(Expression)

CSS表达式是动态设置CSS属性的强大(但危险)方法。

表达式的问题就在于它的计算频率要比我们想象的多。不仅仅是在页面显示和缩放时,就是在页面滚动、乃至移动鼠标时都会 要重新计算一次

使用属性来代替CSS表达式

##### 3.**省略零值后面的单位和省掉起始的0值**

```css
margin: 0; padding: 0; font-size: .8em;
```

##### 4.**使用高效的CSS选择符**

```css

#toc > li{font-weight:bold}

大部分人都是从左向右阅读的阅读习惯
但是，
CSS选择符是从右到左匹配的

再看这个选择符，其实他的开销相当高了，浏览器必须遍历所有的li元素并确定其父元素的ID是toc。
其他的比如#toc a{color:#444}这样的选择符开销则更大，浏览器不但要查找所有的A标签，还要遍历DOM树去查找ID为toc的祖先元素
```



* 避免使用通配规则 (前辈Hyatt也把相邻兄弟选择符、子选择符、后代选择符和属性选择符都归纳到“通配规则”分类下，他推荐仅适用ID、类和标签选择符.)
* 不要限定ID选择符：在页面中一个指定的ID只能对应一个元素，所有没必要额外添加限定符，例如DIV#toc是没有必要的，应简化为#toc。
* 不要限定类选择符：不要用具体的标签限定类选择符，而是根据实际情况对类名进行扩展。例如把li.chapter改为.li-chapter，或是.list-chapter更好。
* 让规则越具体越好，不要试图编写像ol li a这样的长选择符，最好是创建一个像.list-link一样的类。
* 避免使用标签-子选择符，如果有像#toc > li > a这样的基于标签的子选择符，那么应该使用一个类来关联每个标签元素，如.toc-link。
* 依靠继承，了解哪些属性可以通过继承而来，然后避免对这些属性重复指定规则

##### 5.其他

* html 标签使用小写

* 使用 UTF-8 编码

  ```html
  html中： <meta charset="utf-8"> css中： @charset "utf-8";
  ```

  ​



##### **更少的请求比更小的尺寸重要**

文件可以适当的合并，只保留基本的层级即可







#### js

##### 使用外部JavaScript和CSS





##### 削减JavaScript和CSS

压缩js，css；



##### 把脚本置于页面底部

脚本带来的问题就是它阻止了页面的平行下载



##### 减少 DOM 访问

使用 JavaScript 访问 DOM 元素比较慢,因此为了获得更多的应该页面,应该做到:

* 缓存已经访问过的有关元素
* 线下更新完节点之后再将它们添加到文档树中
* 避免使用 JavaScript 来修改页面布局






----

参考：

[yahoo前端优化总结](http://caibaojian.com/481.html)

[[高效css选择符](http://caibaojian.com/616.html)]

[[高效CSS开发核心要点摘录](http://caibaojian.com/efficient-css-development.html)]